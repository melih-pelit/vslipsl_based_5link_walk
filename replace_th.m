xG = (m4*(x1 + (l4*cos(X(1) + X(2) + X(3) + X(4)))/2 + l2*cos(X(1) + X(2)) + l1*cos(X(1)) + l3*cos(X(1) + X(2) + X(3))) + m1*(x1 + (l1*cos(X(1)))/2) + m3*(x1 + l2*cos(X(1) + X(2)) + l1*cos(X(1)) + (l3*cos(X(1) + X(2) + X(3)))/2) + m5*(x1 + l2*cos(X(1) + X(2)) + l1*cos(X(1)) + (l5*cos(X(1) + X(2) + X(5)))/2) + m2*(x1 + (l2*cos(X(1) + X(2)))/2 + l1*cos(X(1))))/(m1 + m2 + m3 + m4 + m5)
zG = (m3*(l2*sin(X(1) + X(2)) + l1*sin(X(1)) + (l3*sin(X(1) + X(2) + X(3)))/2) + m5*(l2*sin(X(1) + X(2)) + l1*sin(X(1)) + (l5*sin(X(1) + X(2) + X(5)))/2) + m2*((l2*sin(X(1) + X(2)))/2 + l1*sin(X(1))) + m4*((l4*sin(X(1) + X(2) + X(3) + X(4)))/2 + l2*sin(X(1) + X(2)) + l1*sin(X(1)) + l3*sin(X(1) + X(2) + X(3))) + (l1*m1*sin(X(1)))/2)/(m1 + m2 + m3 + m4 + m5)
x_sw = x1 + l4*cos(X(1) + X(2) + X(3) + X(4)) + l2*cos(X(1) + X(2)) + l1*cos(X(1)) + l3*cos(X(1) + X(2) + X(3))
y_sw = l4*sin(X(1) + X(2) + X(3) + X(4)) + l2*sin(X(1) + X(2)) + l1*sin(X(1)) + l3*sin(X(1) + X(2) + X(3))


dxG = - (dX(3)*(m4*((l4*sin(th1_des + th2_des + th3_des + th4_des))/2 + l3*sin(th1_des + th2_des + th3_des)) + (l3*m3*sin(th1_des + th2_des + th3_des))/2))/(m1 + m2 + m3 + m4 + m5) - (dX(1)*(m3*(l2*sin(th1_des + th2_des) + l1*sin(th1_des) + (l3*sin(th1_des + th2_des + th3_des))/2) + m5*(l2*sin(th1_des + th2_des) + l1*sin(th1_des) + (l5*sin(th1_des + th2_des + th5_des))/2) + m2*((l2*sin(th1_des + th2_des))/2 + l1*sin(th1_des)) + m4*((l4*sin(th1_des + th2_des + th3_des + th4_des))/2 + l2*sin(th1_des + th2_des) + l1*sin(th1_des) + l3*sin(th1_des + th2_des + th3_des)) + (l1*m1*sin(th1_des))/2))/(m1 + m2 + m3 + m4 + m5) - (dX(2)*(m4*((l4*sin(th1_des + th2_des + th3_des + th4_des))/2 + l2*sin(th1_des + th2_des) + l3*sin(th1_des + th2_des + th3_des)) + m3*(l2*sin(th1_des + th2_des) + (l3*sin(th1_des + th2_des + th3_des))/2) + m5*(l2*sin(th1_des + th2_des) + (l5*sin(th1_des + th2_des + th5_des))/2) + (l2*m2*sin(th1_des + th2_des))/2))/(m1 + m2 + m3 + m4 + m5) - (dX(4)*l4*m4*sin(th1_des + th2_des + th3_des + th4_des))/(2*(m1 + m2 + m3 + m4 + m5)) - (dX(5)*l5*m5*sin(th1_des + th2_des + th5_des))/(2*(m1 + m2 + m3 + m4 + m5))
dyG = (dX(1)*(m3*(l2*cos(th1_des + th2_des) + l1*cos(th1_des) + (l3*cos(th1_des + th2_des + th3_des))/2) + m5*(l2*cos(th1_des + th2_des) + l1*cos(th1_des) + (l5*cos(th1_des + th2_des + th5_des))/2) + m2*((l2*cos(th1_des + th2_des))/2 + l1*cos(th1_des)) + m4*((l4*cos(th1_des + th2_des + th3_des + th4_des))/2 + l2*cos(th1_des + th2_des) + l1*cos(th1_des) + l3*cos(th1_des + th2_des + th3_des)) + (l1*m1*cos(th1_des))/2))/(m1 + m2 + m3 + m4 + m5) + (dX(3)*(m4*((l4*cos(th1_des + th2_des + th3_des + th4_des))/2 + l3*cos(th1_des + th2_des + th3_des)) + (l3*m3*cos(th1_des + th2_des + th3_des))/2))/(m1 + m2 + m3 + m4 + m5) + (dX(2)*(m3*(l2*cos(th1_des + th2_des) + (l3*cos(th1_des + th2_des + th3_des))/2) + m5*(l2*cos(th1_des + th2_des) + (l5*cos(th1_des + th2_des + th5_des))/2) + m4*((l4*cos(th1_des + th2_des + th3_des + th4_des))/2 + l2*cos(th1_des + th2_des) + l3*cos(th1_des + th2_des + th3_des)) + (l2*m2*cos(th1_des + th2_des))/2))/(m1 + m2 + m3 + m4 + m5) + (dX(4)*l4*m4*cos(th1_des + th2_des + th3_des + th4_des))/(2*(m1 + m2 + m3 + m4 + m5)) + (dX(5)*l5*m5*cos(th1_des + th2_des + th5_des))/(2*(m1 + m2 + m3 + m4 + m5))
dx_sw = - dX(2)*(l4*sin(th1_des + th2_des + th3_des + th4_des) + l2*sin(th1_des + th2_des) + l3*sin(th1_des + th2_des + th3_des)) - dX(3)*(l4*sin(th1_des + th2_des + th3_des + th4_des) + l3*sin(th1_des + th2_des + th3_des)) - dX(1)*(l4*sin(th1_des + th2_des + th3_des + th4_des) + l2*sin(th1_des + th2_des) + l1*sin(th1_des) + l3*sin(th1_des + th2_des + th3_des)) - dX(4)*l4*sin(th1_des + th2_des + th3_des + th4_des)
dy_sw = dX(3)*(l4*cos(th1_des + th2_des + th3_des + th4_des) + l3*cos(th1_des + th2_des + th3_des)) + dX(1)*(l4*cos(th1_des + th2_des + th3_des + th4_des) + l2*cos(th1_des + th2_des) + l1*cos(th1_des) + l3*cos(th1_des + th2_des + th3_des)) + dX(2)*(l4*cos(th1_des + th2_des + th3_des + th4_des) + l2*cos(th1_des + th2_des) + l3*cos(th1_des + th2_des + th3_des)) + dX(4)*l4*cos(th1_des + th2_des + th3_des + th4_des)

ddxG = -(dth1_des^2*l3*m3*cos(th1_des + th2_des + th3_des) + 2*dth1_des^2*l3*m4*cos(th1_des + th2_des + th3_des) + dth2_des^2*l3*m3*cos(th1_des + th2_des + th3_des) + 2*dth2_des^2*l3*m4*cos(th1_des + th2_des + th3_des) + dth2_des^2*l3*m3*cos(th1_des + th2_des + th3_des) + 2*dth2_des^2*l3*m4*cos(th1_des + th2_des + th3_des) + dth1_des^2*l5*m5*cos(th1_des + th2_des + th5_des) + dth2_des^2*l5*m5*cos(th1_des + th2_des + th5_des) + dth5_des^2*l5*m5*cos(th1_des + th2_des + th5_des) + ddX(1)*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + ddX(2)*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + ddX(3)*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + ddX(4)*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + ddX(1)*l2*m2*sin(th1_des + th2_des) + 2*ddX(1)*l2*m3*sin(th1_des + th2_des) + ddX(2)*l2*m2*sin(th1_des + th2_des) + 2*ddX(1)*l2*m4*sin(th1_des + th2_des) + 2*ddX(2)*l2*m3*sin(th1_des + th2_des) + 2*ddX(1)*l2*m5*sin(th1_des + th2_des) + 2*ddX(2)*l2*m4*sin(th1_des + th2_des) + 2*ddX(2)*l2*m5*sin(th1_des + th2_des) + ddX(1)*l1*m1*sin(th1_des) + 2*ddX(1)*l1*m2*sin(th1_des) + 2*ddX(1)*l1*m3*sin(th1_des) + 2*ddX(1)*l1*m4*sin(th1_des) + 2*ddX(1)*l1*m5*sin(th1_des) + dth1_des^2*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + dth2_des^2*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + dth2_des^2*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + dth4_des^2*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + dth1_des^2*l2*m2*cos(th1_des + th2_des) + 2*dth1_des^2*l2*m3*cos(th1_des + th2_des) + dth2_des^2*l2*m2*cos(th1_des + th2_des) + 2*dth1_des^2*l2*m4*cos(th1_des + th2_des) + 2*dth2_des^2*l2*m3*cos(th1_des + th2_des) + 2*dth1_des^2*l2*m5*cos(th1_des + th2_des) + 2*dth2_des^2*l2*m4*cos(th1_des + th2_des) + 2*dth2_des^2*l2*m5*cos(th1_des + th2_des) + ddX(1)*l3*m3*sin(th1_des + th2_des + th3_des) + 2*ddX(1)*l3*m4*sin(th1_des + th2_des + th3_des) + ddX(2)*l3*m3*sin(th1_des + th2_des + th3_des) + 2*ddX(2)*l3*m4*sin(th1_des + th2_des + th3_des) + ddX(3)*l3*m3*sin(th1_des + th2_des + th3_des) + 2*ddX(3)*l3*m4*sin(th1_des + th2_des + th3_des) + ddX(1)*l5*m5*sin(th1_des + th2_des + th5_des) + ddX(2)*l5*m5*sin(th1_des + th2_des + th5_des) + ddX(5)*l5*m5*sin(th1_des + th2_des + th5_des) + dth1_des^2*l1*m1*cos(th1_des) + 2*dth1_des^2*l1*m2*cos(th1_des) + 2*dth1_des^2*l1*m3*cos(th1_des) + 2*dth1_des^2*l1*m4*cos(th1_des) + 2*dth1_des^2*l1*m5*cos(th1_des) + 2*dth1_des*dth2_des*l3*m3*cos(th1_des + th2_des + th3_des) + 4*dth1_des*dth2_des*l3*m4*cos(th1_des + th2_des + th3_des) + 2*dth1_des*dth2_des*l3*m3*cos(th1_des + th2_des + th3_des) + 4*dth1_des*dth2_des*l3*m4*cos(th1_des + th2_des + th3_des) + 2*dth2_des*dth2_des*l3*m3*cos(th1_des + th2_des + th3_des) + 4*dth2_des*dth2_des*l3*m4*cos(th1_des + th2_des + th3_des) + 2*dth1_des*dth2_des*l5*m5*cos(th1_des + th2_des + th5_des) + 2*dth1_des*dth5_des*l5*m5*cos(th1_des + th2_des + th5_des) + 2*dth2_des*dth5_des*l5*m5*cos(th1_des + th2_des + th5_des) + 2*dth1_des*dth2_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth2_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth4_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth2_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth4_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth4_des*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth2_des*l2*m2*cos(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m3*cos(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m4*cos(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m5*cos(th1_des + th2_des))/(2*(m1 + m2 + m3 + m4 + m5))
ddyG = -(dth1_des^2*l3*m3*sin(th1_des + th2_des + th3_des) + 2*dth1_des^2*l3*m4*sin(th1_des + th2_des + th3_des) + dth2_des^2*l3*m3*sin(th1_des + th2_des + th3_des) + 2*dth2_des^2*l3*m4*sin(th1_des + th2_des + th3_des) + dth2_des^2*l3*m3*sin(th1_des + th2_des + th3_des) + 2*dth2_des^2*l3*m4*sin(th1_des + th2_des + th3_des) + dth1_des^2*l5*m5*sin(th1_des + th2_des + th5_des) + dth2_des^2*l5*m5*sin(th1_des + th2_des + th5_des) + dth5_des^2*l5*m5*sin(th1_des + th2_des + th5_des) - ddX(1)*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) - ddX(2)*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) - ddX(3)*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) - ddX(4)*l4*m4*cos(th1_des + th2_des + th3_des + th4_des) - ddX(1)*l2*m2*cos(th1_des + th2_des) - 2*ddX(1)*l2*m3*cos(th1_des + th2_des) - ddX(2)*l2*m2*cos(th1_des + th2_des) - 2*ddX(1)*l2*m4*cos(th1_des + th2_des) - 2*ddX(2)*l2*m3*cos(th1_des + th2_des) - 2*ddX(1)*l2*m5*cos(th1_des + th2_des) - 2*ddX(2)*l2*m4*cos(th1_des + th2_des) - 2*ddX(2)*l2*m5*cos(th1_des + th2_des) - ddX(1)*l1*m1*cos(th1_des) - 2*ddX(1)*l1*m2*cos(th1_des) - 2*ddX(1)*l1*m3*cos(th1_des) - 2*ddX(1)*l1*m4*cos(th1_des) - 2*ddX(1)*l1*m5*cos(th1_des) + dth1_des^2*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + dth2_des^2*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + dth2_des^2*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + dth4_des^2*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + dth1_des^2*l2*m2*sin(th1_des + th2_des) + 2*dth1_des^2*l2*m3*sin(th1_des + th2_des) + dth2_des^2*l2*m2*sin(th1_des + th2_des) + 2*dth1_des^2*l2*m4*sin(th1_des + th2_des) + 2*dth2_des^2*l2*m3*sin(th1_des + th2_des) + 2*dth1_des^2*l2*m5*sin(th1_des + th2_des) + 2*dth2_des^2*l2*m4*sin(th1_des + th2_des) + 2*dth2_des^2*l2*m5*sin(th1_des + th2_des) - ddX(1)*l3*m3*cos(th1_des + th2_des + th3_des) - 2*ddX(1)*l3*m4*cos(th1_des + th2_des + th3_des) - ddX(2)*l3*m3*cos(th1_des + th2_des + th3_des) - 2*ddX(2)*l3*m4*cos(th1_des + th2_des + th3_des) - ddX(3)*l3*m3*cos(th1_des + th2_des + th3_des) - 2*ddX(3)*l3*m4*cos(th1_des + th2_des + th3_des) - ddX(1)*l5*m5*cos(th1_des + th2_des + th5_des) - ddX(2)*l5*m5*cos(th1_des + th2_des + th5_des) - ddX(5)*l5*m5*cos(th1_des + th2_des + th5_des) + dth1_des^2*l1*m1*sin(th1_des) + 2*dth1_des^2*l1*m2*sin(th1_des) + 2*dth1_des^2*l1*m3*sin(th1_des) + 2*dth1_des^2*l1*m4*sin(th1_des) + 2*dth1_des^2*l1*m5*sin(th1_des) + 2*dth1_des*dth2_des*l3*m3*sin(th1_des + th2_des + th3_des) + 4*dth1_des*dth2_des*l3*m4*sin(th1_des + th2_des + th3_des) + 2*dth1_des*dth2_des*l3*m3*sin(th1_des + th2_des + th3_des) + 4*dth1_des*dth2_des*l3*m4*sin(th1_des + th2_des + th3_des) + 2*dth2_des*dth2_des*l3*m3*sin(th1_des + th2_des + th3_des) + 4*dth2_des*dth2_des*l3*m4*sin(th1_des + th2_des + th3_des) + 2*dth1_des*dth2_des*l5*m5*sin(th1_des + th2_des + th5_des) + 2*dth1_des*dth5_des*l5*m5*sin(th1_des + th2_des + th5_des) + 2*dth2_des*dth5_des*l5*m5*sin(th1_des + th2_des + th5_des) + 2*dth1_des*dth2_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth2_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth4_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth2_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth4_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth2_des*dth4_des*l4*m4*sin(th1_des + th2_des + th3_des + th4_des) + 2*dth1_des*dth2_des*l2*m2*sin(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m3*sin(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m4*sin(th1_des + th2_des) + 4*dth1_des*dth2_des*l2*m5*sin(th1_des + th2_des))/(2*(m1 + m2 + m3 + m4 + m5))
ddx_sw = - ddX(1)*l1*sin(th1_des) - dth1_des^2*l4*cos(th1_des + th2_des + th3_des + th4_des) - dth2_des^2*l4*cos(th1_des + th2_des + th3_des + th4_des) - dth3_des^2*l4*cos(th1_des + th2_des + th3_des + th4_des) - dth4_des^2*l4*cos(th1_des + th2_des + th3_des + th4_des) - dth1_des^2*l2*cos(th1_des + th2_des) - dth2_des^2*l2*cos(th1_des + th2_des) - ddX(1)*l3*sin(th1_des + th2_des + th3_des) - ddX(2)*l3*sin(th1_des + th2_des + th3_des) - ddX(3)*l3*sin(th1_des + th2_des + th3_des) - dth1_des^2*l1*cos(th1_des) - dth1_des^2*l3*cos(th1_des + th2_des + th3_des) - dth2_des^2*l3*cos(th1_des + th2_des + th3_des) - dth3_des^2*l3*cos(th1_des + th2_des + th3_des) - ddX(1)*l4*sin(th1_des + th2_des + th3_des + th4_des) - ddX(2)*l4*sin(th1_des + th2_des + th3_des + th4_des) - ddX(3)*l4*sin(th1_des + th2_des + th3_des + th4_des) - ddX(4)*l4*sin(th1_des + th2_des + th3_des + th4_des) - ddX(1)*l2*sin(th1_des + th2_des) - ddX(2)*l2*sin(th1_des + th2_des) - 2*dth1_des*dth2_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth3_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth4_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth2_des*dth3_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth2_des*dth4_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth3_des*dth4_des*l4*cos(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth2_des*l2*cos(th1_des + th2_des) - 2*dth1_des*dth2_des*l3*cos(th1_des + th2_des + th3_des) - 2*dth1_des*dth3_des*l3*cos(th1_des + th2_des + th3_des) - 2*dth2_des*dth3_des*l3*cos(th1_des + th2_des + th3_des)
ddy_sw = ddX(1)*l1*cos(th1_des) - dth1_des^2*l4*sin(th1_des + th2_des + th3_des + th4_des) - dth2_des^2*l4*sin(th1_des + th2_des + th3_des + th4_des) - dth3_des^2*l4*sin(th1_des + th2_des + th3_des + th4_des) - dth4_des^2*l4*sin(th1_des + th2_des + th3_des + th4_des) - dth1_des^2*l2*sin(th1_des + th2_des) - dth2_des^2*l2*sin(th1_des + th2_des) + ddX(1)*l3*cos(th1_des + th2_des + th3_des) + ddX(2)*l3*cos(th1_des + th2_des + th3_des) + ddX(3)*l3*cos(th1_des + th2_des + th3_des) - dth1_des^2*l1*sin(th1_des) - dth1_des^2*l3*sin(th1_des + th2_des + th3_des) - dth2_des^2*l3*sin(th1_des + th2_des + th3_des) - dth3_des^2*l3*sin(th1_des + th2_des + th3_des) + ddX(1)*l4*cos(th1_des + th2_des + th3_des + th4_des) + ddX(2)*l4*cos(th1_des + th2_des + th3_des + th4_des) + ddX(3)*l4*cos(th1_des + th2_des + th3_des + th4_des) + ddX(4)*l4*cos(th1_des + th2_des + th3_des + th4_des) + ddX(1)*l2*cos(th1_des + th2_des) + ddX(2)*l2*cos(th1_des + th2_des) - 2*dth1_des*dth2_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth3_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth4_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth2_des*dth3_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth2_des*dth4_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth3_des*dth4_des*l4*sin(th1_des + th2_des + th3_des + th4_des) - 2*dth1_des*dth2_des*l2*sin(th1_des + th2_des) - 2*dth1_des*dth2_des*l3*sin(th1_des + th2_des + th3_des) - 2*dth1_des*dth3_des*l3*sin(th1_des + th2_des + th3_des) - 2*dth2_des*dth3_des*l3*sin(th1_des + th2_des + th3_des)